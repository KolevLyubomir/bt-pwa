/* PROGRAM STATES
   Състояния на клетките, активни дни, индикации за статус и анимации
*/

/* Дни – по-слаб weight по подразбиране */
.pl-day {
  cursor:pointer;
  user-select:none;
  font-weight:400;
}
.pl-day.weekend {
  background:transparent;
  color:#E96982;
}
/* Текущият ден – по-дебел и по-голям */
.pl-day.today {
  border-color:var(--sel-orange);
  border-style:solid;
  font-weight:900;
  font-size:calc(var(--pl-font) + 1px);
}
.pl-day.active:not(.today) {
  border-color:#20343a; 
  border-style:solid;
}

/* Часовете – по-слаби по подразбиране */
.pl-time-cell {
  cursor:pointer;
  user-select:none;
  font-weight:400;
  position:relative;
  background:transparent;
}

/* Часовете в текущия ден – подсилен бордер, според колоната на .pl-day.today */
/* Пн – първа колона */
.pl-table:has(thead th.pl-day.today:nth-child(1)) tbody tr td:nth-child(1),
/* Вт – втора колона */
.pl-table:has(thead th.pl-day.today:nth-child(2)) tbody tr td:nth-child(2),
/* Ср – трета колона */
.pl-table:has(thead th.pl-day.today:nth-child(3)) tbody tr td:nth-child(3),
/* Чт – четвърта колона */
.pl-table:has(thead th.pl-day.today:nth-child(4)) tbody tr td:nth-child(4),
/* Пт – пета колона */
.pl-table:has(thead th.pl-day.today:nth-child(5)) tbody tr td:nth-child(5),
/* Сб – шеста колона */
.pl-table:has(thead th.pl-day.today:nth-child(6)) tbody tr td:nth-child(6),
/* Нд – седма колона */
.pl-table:has(thead th.pl-day.today:nth-child(7)) tbody tr td:nth-child(7) {
  font-weight:900;
  font-size:var(--pl-font);
  border-width:1.2px;
  border-color:#9B9A96;
}

.pl-time-cell.sel { box-shadow:0 0 0 2px var(--sel-orange) inset; }
.pl-time-cell.red { background:#3d1010; border-color:#6b1414; }

/* Статуси на приеми */
.pl-time-cell.int-upcoming { background:#cc5500; border-color:#facc15; }
.pl-time-cell.int-done {
  background:#007500;
  border-color:#166534;
}

/* ПРОМЯНА (т.1): Добавяме animation-delay, контролиран от JS.
   Така всички клетки ще мигат в синхрон.
*/
.pl-time-cell.int-overdue {
  background:#cc5500;
  border-color:#facc15;
  animation:plOverdueBlink 1s ease-in-out infinite;
  animation-delay:var(--blink-offset, 0s);
}

/* Допълнителни състояния за текстове */
.prog-cap-main.configured {
  color: var(--muted);
}

/* Специфични размери за бутона в програмата спрямо статуса */
.prog-intake-btn.upcoming,
.prog-intake-btn.overdue {
  width:28px;
  height:28px;
}
.prog-intake-btn.upcoming .clk-btn-icon svg,
.prog-intake-btn.overdue .clk-btn-icon svg {
  width:28px;
  height:28px;
}

/* Анимации */

@keyframes plBlink {
  0%,100% {
    box-shadow:0 0 0 0 rgba(34,197,94,0);
    background-color:inherit;
  }
  20%,50%,80% {
    box-shadow:0 0 0 2px rgba(34,197,94,.75);
    background-color:#102318;
  }
}
.pl-blink {
  animation:plBlink .9s ease-in-out 3;
}

@keyframes plOverdueBlink {
  0%,100% {
    box-shadow:0 0 0 0 rgba(250,204,21,0);
  }
  50% {
    box-shadow:0 0 0 3px rgba(250,204,21,.9);
  }
}