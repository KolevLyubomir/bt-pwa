.prog-row{ display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap; margin:8px 0 0 }
.prog-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:6px;
}
.prog-head-main{
  display:flex;
  align-items:center;
  gap:12px;
  min-width:0;
}
.prod-img{ width:76px; height:76px; object-fit:contain; border-radius:12px; background:#0d171b; border:1px solid #254046 }
.prog-pill{
  display:flex; flex-direction:column; gap:6px;
  padding:8px 10px; background:#0d171b; border:1px solid #254046; border-radius:10px;
  width:var(--pill-w); min-width:var(--pill-w); max-width:var(--pill-w);
}
.prog-pill label{ display:flex; align-items:center; gap:6px; cursor:pointer; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.prog-pill input[type="checkbox"]{ width:16px; height:16px; margin:0 }
.prog-cap{ font-weight:700; font-size:13px; }
.prog-sep{ border:0; border-top:1px solid var(--border); margin:14px 0 }

/* Бутонът за прием до името на продукта (Основен Пакет) */
.prog-intake-btn{
  flex:0 0 auto;
  padding:0;
}
.prog-intake-btn .clk-btn-icon{
  padding:0;
}
.prog-intake-btn .clk-btn-icon svg{
  width:32px;
  height:32px;
}
.prog-intake-btn.upcoming,
.prog-intake-btn.overdue{
  width:28px;
  height:28px;
}
.prog-intake-btn.upcoming .clk-btn-icon svg,
.prog-intake-btn.overdue .clk-btn-icon svg{
  width:28px;
  height:28px;
}

.time-wrap{ display:flex; align-items:center; gap:6px }
.time-row{ display:flex; align-items:center; gap:4px }
.time-row select{ min-width:54px; padding:6px 8px; height:36px; font-size:14px }
select option.strong { font-weight:700; }

/* Контейнер за таблиците с часове */
.pl-wrap{
  overflow-x:hidden;
  margin-bottom:14px; /* въздух под таблицата */
}

.pl-table{ width:100%; border-collapse:separate; border-spacing:3px; table-layout:fixed }
.pl-table th, .pl-table td{
  border:1px solid #20343a; border-radius:10px; text-align:center;
  padding:var(--pl-pad); font-size:var(--pl-font); line-height:1.05; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  min-width:var(--pl-minw);
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease, font-size .15s ease;
}

/* Дни – по-слаб weight по подразбиране */
.pl-day{
  cursor:pointer;
  user-select:none;
  font-weight:400;
}
.pl-day.weekend{
  background:transparent;
  color:#f97373;
}
/* Текущият ден – по-дебел и по-голям */
.pl-day.today{
  border-color:var(--sel-orange);
  border-style:solid;
  font-weight:900;
  font-size:calc(var(--pl-font) + 1px);
}
.pl-day.active:not(.today){
  border-color:#20343a; 
  border-style:solid;
}

/* Часовете – по-слаби по подразбиране */
.pl-time-cell{
  cursor:pointer;
  user-select:none;
  font-weight:400;
  position:relative;
  background:transparent;
}

/* Часовете в текущия ден – подсилен бордер, според колоната на .pl-day.today */
/* Пн – първа колона */
.pl-table:has(thead th.pl-day.today:nth-child(1)) tbody tr td:nth-child(1),
/* Вт – втора колона */
.pl-table:has(thead th.pl-day.today:nth-child(2)) tbody tr td:nth-child(2),
/* Ср – трета колона */
.pl-table:has(thead th.pl-day.today:nth-child(3)) tbody tr td:nth-child(3),
/* Чт – четвърта колона */
.pl-table:has(thead th.pl-day.today:nth-child(4)) tbody tr td:nth-child(4),
/* Пт – пета колона */
.pl-table:has(thead th.pl-day.today:nth-child(5)) tbody tr td:nth-child(5),
/* Сб – шеста колона */
.pl-table:has(thead th.pl-day.today:nth-child(6)) tbody tr td:nth-child(6),
/* Нд – седма колона */
.pl-table:has(thead th.pl-day.today:nth-child(7)) tbody tr td:nth-child(7){
  font-weight:900;
  font-size:var(--pl-font);
  border-width:1.5px;
  border-color:#20343a;
}

.pl-time-cell.sel{ box-shadow:0 0 0 2px var(--sel-orange) inset; }
.pl-time-cell.red{ background:#3d1010; border-color:#6b1414 }
.pl-time-cell.int-upcoming{ background:#4a3a12; border-color:#facc15 }
.pl-time-cell.int-done{
  background:#15803d;
  border-color:#166534;
}
.pl-time-cell.int-overdue{
  background:#4a3a12;
  border-color:#facc15;
  animation:plOverdueBlink 1s ease-in-out infinite;
}

@keyframes plBlink{
  0%,100%{
    box-shadow:0 0 0 0 rgba(34,197,94,0);
    background-color:inherit;
  }
  20%,50%,80%{
    box-shadow:0 0 0 2px rgba(34,197,94,.75);
    background-color:#102318;
  }
}
.pl-blink{
  animation:plBlink .9s ease-in-out 3;
}

@keyframes plOverdueBlink{
  0%,100%{
    box-shadow:0 0 0 0 rgba(250,204,21,0);
  }
  50%{
    box-shadow:0 0 0 3px rgba(250,204,21,.9);
  }
}

.clk{ display:none; position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:100 }
.clk.show{ display:flex; align-items:center; justify-content:center }
.clk-card{
  background:#0e1519; border:1px solid #20343a; border-radius:16px;
  padding:12px 12px 14px; width:330px; max-width:92vw;
  box-shadow:0 10px 40px rgba(0,0,0,.5); outline:none;
  position:relative;
}

.clk-header{
  margin-bottom:6px;
  padding:0 2px 4px;
  text-align:center;
}
.clk-product-title{
  font-size:13px;
  font-weight:700;
  text-transform:none;
  margin-bottom:2px;
}
.clk-day{
  font-size:11px;
  opacity:0.8;
  text-transform:lowercase;
  color:var(--muted);
}

.clk-face{
  position:relative;
  width:290px;
  height:290px;
  margin:0 auto;
  border-radius:50%;
  border:1px solid #294047;
  background:#0b1317;
  touch-action:none;
}
.clk-ring{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); border-radius:50% }
.clk-ring.hours{ width:190px; height:190px }
.clk-ring.mins{ width:260px; height:260px }

.clk-tick{
  position:absolute;
  width:24px;
  height:24px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:13px;
  color:#d6ece6;
  border:1px solid transparent;
  background:#0f1a1d;
  user-select:none;
  transition:background .15s ease,
             border-color .15s ease,
             color .15s ease,
             transform .12s ease;
}

.clk-tick.hour{
  font-size:14px;
  font-family:"Marcellus","Times New Roman",serif;
  letter-spacing:0.5px;
}
.clk-tick.hour.strong{
  font-weight:900;
  font-size:17px;
  text-shadow:0 0 3px rgba(0,0,0,.7);
}

.clk-tick.hour.sel{
  background:#22c55e; color:#06241b;
  font-weight:900;
  text-shadow:0 0 4px rgba(0,0,0,.9);
  transform:scale(1.04);
}

.clk-tick:not(.hour){
  font-family:'Montserrat',system-ui,-apple-system,sans-serif;
}

.clk-tick.minor{
  background:#0b1317;
  border-color:transparent;
  font-size:9px;
  color:#6b8b92;
}
.clk-tick.minor.sel{
  background:#22c55e;
  border-color:#22c55e;
  color:#06241b;
  transform:scale(1.2);
}

.clk-tick.quarter{
  font-size:14px;
  font-weight:800;
  text-shadow:0 0 3px rgba(0,0,0,.6);
}

.clk-tick.strong.sel,
.clk-tick.quarter.sel{
  background:#22c55e;
  border-color:#22c55e;
  color:#06241b;
  transform:scale(1.2);
  font-weight:900;
  text-shadow:0 0 3px rgba(0,0,0,.7);
}

.clk-tick.hour.sel,
.clk-tick.minor.sel,
.clk-tick.strong.sel,
.clk-tick.quarter.sel{
  outline:none;
}

.clk-hand{ position:absolute; left:50%; top:50%; transform-origin:50% 100%; pointer-events:none }
.clk-hand.hour{ width:6px; height:68px; background:#e7faf4; border-radius:3px; transform:translate(-50%,-100%) rotate(0deg); box-shadow:0 0 0 1px #0b1215 inset }
.clk-hand.min{ width:3px; height:96px; background:#cde7df; border-radius:2px; transform:translate(-50%,-100%) rotate(0deg); box-shadow:0 0 0 1px #0b1215 inset }

.clk-center-dot{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:10px; height:10px; background:#fff; border-radius:50%; box-shadow:0 0 0 2px #0b1217 }

.clk-read{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  background:#10191c; border:1px solid #294047; border-radius:6px;
  padding:3px 6px;
  font-weight:800; text-align:center;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:3px;
  font-size:18px;
  min-width:auto;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,"Noto Sans",sans-serif;
  user-select:none;
}
.clk-read.editing{
  border-color:#ffffff;
  cursor:text;
  user-select:text;
}

.clk-read-part{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:1px;
  min-width:0;
}
.clk-digit{
  display:inline-block;
  min-width:0.9ch;
  text-align:center;
  color:#e6f2ef;
  position:relative;
  line-height:1.1;
}

@keyframes clkBlink{
  0%,49%{ opacity:1; }
  50%,100%{ opacity:0; }
}
.clk-read.editing .clk-digit.active::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:-1px;
  height:2px;
  background:#e6f2ef;
  border-radius:2px;
  animation:clkBlink 1s steps(2,start) infinite;
}

.clk-read-colon{
  user-select:none;
  padding:0 3px;
  margin:0;
  opacity:.9;
  line-height:1;
  position:relative;
  top:-1px;
}

.clk-actions{
  margin-top:8px;
}
.clk-actions-row{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  gap:8px;
}
.clk-actions-group{
  display:flex;
  gap:8px;
}

.clk-btn{
  border-radius:999px;
  border:1px solid #24343a;
  background:#0d171b;
  color:#e6f2ef;
  width:34px;
  height:34px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  transition:background .12s ease,border-color .12s ease,transform .04s ease;
  flex:0 0 auto;
}
.clk-btn.big{
  width:52px;
  height:52px;
}
.clk-btn.big .clk-btn-icon svg{
  width:34px;
  height:34px;
}

#clk .clk-btn.big{
  width:44px;
  height:44px;
}
#clk #btnIntake .clk-btn-icon svg{
  width:38px;
  height:38px;
}
#clk #btnAudio .clk-btn-icon svg{
  width:38px;
  height:38px;
}

.clk-btn:active{
  transform:scale(.96);
}
.clk-btn.primary{
  background:#22c55e;
  border-color:#22c55e;
  color:#06241b;
}
.clk-btn.ghost{
  background:#0d171b;
  border-style:dashed;
}
.clk-btn.danger{
  background:#3b1113;
  border-color:#6b1414;
  color:#ffe0e0;
}
.clk-btn.empty{
  visibility:hidden;
  pointer-events:none;
}
.clk-btn.icon-only{ padding:0 }
.clk-btn-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
.clk-btn-icon svg{
  width:24px;
  height:24px;
  stroke:currentColor;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

.clk-btn.intake svg .pill-clock-circle,
.clk-btn.intake svg .pill-clock-pill{
  fill:none;
  stroke:currentColor;
  stroke-width:1.8;
}
.clk-btn.intake svg .pill-clock-hands{
  stroke:currentColor;
  stroke-width:1.8;
  stroke-linecap:round;
}
.clk-btn.intake.solid svg .pill-clock-circle,
.clk-btn.intake.solid svg .pill-clock-pill{
  fill:none;
}

.clk-btn.intake{
  background:#0d171b;
  border-color:#24343a;
  color:#e6f2ef;
}
.clk-btn.intake.upcoming{
  background:#f59e0b;
  border-color:#f59e0b;
  color:#041306;
}
.clk-btn.intake.overdue{
  background:#facc15;
  border-color:#facc15;
  color:#3b1f00;
  animation:intakeBtnBlink 1s ease-in-out infinite;
}
.clk-btn.intake.done{
  background:#22c55e;
  border-color:#22c55e;
  color:#06241b;
  animation:none;
}
@keyframes intakeBtnBlink{
  0%,100%{
    box-shadow:0 0 0 0 rgba(250,204,21,0);
  }
  50%{
    box-shadow:0 0 0 3px rgba(250,204,21,.9);
  }
}

.clk-btn.audio{
  background:#0d171b;
  border-color:#24343a;
  color:#e6f2ef;
}
.clk-btn.audio.on{
  background:#3b1113;
  border-color:#6b1414;
  color:#ffe0e0;
}
.clk-btn.audio.off{
  background:#22c55e;
  border-color:#22c55e;
  color:#06241b;
}
.clk-btn.audio svg .icon-sound{ display:none; }
.clk-btn.audio svg .icon-mute{ display:block; }
.clk-btn.audio.off svg .icon-sound{ display:block; }
.clk-btn.audio.off svg .icon-mute{ display:none; }

@media (max-width: 380px){
  .time-row select{ min-width:48px; }
  .prod-img{ width:64px; height:64px; border-radius:10px; }
  .clk-card{ width:306px }
  .clk-face{ width:272px; height:272px }
  .clk-ring.hours{ width:180px; height:180px }
  .clk-ring.mins{ width:248px; height:248px }
  .clk-hand.hour{ height:64px } .clk-hand.min{ height:90px }
}

/*
  ↓↓↓ НОВИ/ОБНОВЕНИ СТИЛОВЕ (v4.1.x) ↓↓↓
*/

/* --- Стилове за Конфигуратора (Доп. Пакет) --- */

.prog-head-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* ГЛАВАТА става бутон */
.prog-head-main.clickable {
  cursor: pointer;
  border-radius: 8px;
  padding: 4px;
  transition: background .15s ease;
  flex: 1 1 auto; 
}
.prog-head-main.clickable:hover {
  background: #1a2a2f;
}

/* Заглавие на 2 реда */
.prog-cap-stack {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* Берберин – основен надпис */
.prog-cap-main {
  font-weight: 700;
  font-size: 13px;
  color: var(--text);
  font-family: inherit;
  transition: color .2s ease;
}
.prog-cap-main.configured {
  color: var(--muted);
}

/* Марка – същият размер и дебелина като ProLact / Omni / Хитозан */
.prog-cap-brand {
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  font-family: inherit;
}

/* --- Панел за Настройки --- */
.prog-config {
  flex-direction: column;
  gap: 14px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--border);
}

.prog-config .field {
  margin-bottom: 0;
}
.prog-config .field.brand-selector {
  margin-bottom: 8px;
}
.prog-config .field.custom-brand-field {
  margin-bottom: 8px;
}

.prog-config .field .lbl {
  margin-bottom: 4px;
}

.prog-config select:focus,
.prog-config input[type="text"]:focus {
  outline: none;
  box-shadow: none;
  border-color: #2b6e66;
}

/* Контейнер за кръглите бутони */
.config-actions {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin-top: 26px;
  margin-bottom: 26px;
}
.config-buttons {
  display: flex;
  gap: 8px;
}
.config-actions .clk-btn {
  width: 34px;
  height: 34px;
}
.config-actions .clk-btn .clk-btn-icon svg {
  width: 20px;
  height: 20px;
}
button.danger {
  background: var(--danger);
  border-color: var(--danger);
  color: #fff;
  font-weight: 700;
}

/* Стойност до плъзгача */
.slider-val {
  color: var(--accent);
  font-weight: 800;
  font-size: 1.1em;
  padding: 0 4px;
}

/* Обвивка за плъзгача – 50% ширина, подравнен вляво */
.slider-track-wrapper {
  position: relative;
  margin-top: 8px;
  height: 10px;
  width: 50%;
  margin-left: 0;
  margin-right: 0;
}

.slider-track-fill {
  position: absolute;
  left: 0;
  top: 0;
  height: 10px;
  background: var(--accent);
  border-radius: 5px;
  pointer-events: none;
  z-index: 1;
}

.slider-control {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 10px;
  border-radius: 5px;
  border: 1px solid #254046;
  outline: none;
  padding: 0;
  position: relative;
  z-index: 2;
  background: transparent;
}

.slider-control::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  background: var(--accent);
  border-radius: 50%;
  cursor: pointer;
  border: 3px solid #06241b;
}

.slider-control::-moz-range-thumb {
  width: 24px;
  height: 24px;
  background: var(--accent);
  border-radius: 50%;
  cursor: pointer;
  border: 3px solid #06241b;
}

/* =========
   Confirm модал за изтриване на марка (Берберин)
   ========= */

.bt-confirm-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  z-index:200;
  display:flex;
  align-items:center;
  justify-content:center;
}

.bt-confirm-dialog{
  background:#0e1519;
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px 16px 12px;
  max-width:320px;
  width:90%;
  box-shadow:0 12px 40px rgba(0,0,0,.6);
}

.bt-confirm-text{
  margin:0 0 12px;
  font-size:14px;
  line-height:1.4;
  color:var(--text);
}

.bt-confirm-actions{
  display:flex;
  justify-content:flex-end;
  gap:8px;
}

.bt-confirm-btn{
  border-radius:999px;
  padding:6px 14px;
  font-size:13px;
  font-weight:700;
  border:1px solid #24343a;
  background:#0d171b;
  color:#e6f2ef;
  cursor:pointer;
  -webkit-tap-highlight-color:transparent;
  transition:background .12s ease,border-color .12s ease,transform .04s ease;
}
.bt-confirm-btn:active{
  transform:scale(.97);
}

.bt-confirm-btn-secondary{
  background:#0d171b;
  border-color:#24343a;
  color:#e6f2ef;
}

.bt-confirm-btn-danger{
  background:var(--danger);
  border-color:var(--danger);
  color:#fff;
}