/* PROGRAM LAYOUT
   Структура на редове, хедъри, таблици и конфигурационен панел
*/

.prog-row { display:flex; align-items:flex-start; gap:12px; flex-wrap:wrap; margin:8px 0 0; }

.prog-head {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:6px;
  /* Важно: Забраняваме пренасянето, за да не пада бутонът под картинката */
  flex-wrap: nowrap; 
}

.prog-head-main {
  display:flex;
  align-items:center;
  gap:12px;
  min-width:0;
  /* Позволяваме на текста да се свива, но не и на картинката */
  flex: 1 1 auto;
}

.prod-img { 
  width:76px; height:76px; 
  object-fit:contain; 
  border-radius:12px; 
  background:#0d171b; 
  border:1px solid #254046;
  flex-shrink: 0; /* Картинката никога не се мачка */
}

.prog-pill {
  display:flex; flex-direction:column; gap:6px;
  padding:8px 10px; background:#0d171b; border:1px solid #254046; border-radius:10px;
  width:var(--pill-w); min-width:var(--pill-w); max-width:var(--pill-w);
}
.prog-pill label { display:flex; align-items:center; gap:6px; cursor:pointer; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.prog-pill input[type="checkbox"] { width:16px; height:16px; margin:0; }

.prog-cap { font-weight:700; font-size:13px; }
.prog-sep { border:0; border-top:1px solid var(--border); margin:14px 0; }

/* Бутонът за прием до името на продукта (Основен Пакет) - структура */
.prog-intake-btn {
  flex:0 0 auto;
  padding:0;
}
.prog-intake-btn .clk-btn-icon {
  padding:0;
}
.prog-intake-btn .clk-btn-icon svg {
  width:32px;
  height:32px;
}

.time-wrap { display:flex; align-items:center; gap:6px; }
.time-row { display:flex; align-items:center; gap:4px; }
.time-row select { min-width:54px; padding:6px 8px; height:36px; font-size:14px; }
select option.strong { font-weight:700; }

/* Контейнер за таблиците с часове */
.pl-wrap {
  overflow-x:hidden;
  margin-bottom:14px; /* въздух под таблицата */
}

.pl-table { width:100%; border-collapse:separate; border-spacing:3px; table-layout:fixed; }
.pl-table th, .pl-table td {
  border:1px solid #20343a; border-radius:10px; text-align:center;
  padding:var(--pl-pad); font-size:var(--pl-font); line-height:1.05; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  min-width:var(--pl-minw);
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease, font-size .15s ease;
}

/* --- Стилове за Конфигуратора (Доп. Пакет) --- */

.prog-head-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0; /* Бутоните не се мачкат */
}

/* ГЛАВАТА става бутон */
.prog-head-main.clickable {
  cursor: pointer;
  border-radius: 8px;
  padding: 4px;
  transition: background .15s ease;
}
.prog-head-main.clickable:hover {
  background: #1a2a2f;
}

/* СТЕК (Заглавие + Марка) */
.prog-cap-stack {
  display: flex;
  flex-direction: column;       
  justify-content: center;      /* Вертикално центриране */
  align-items: flex-start;      
  height: 76px;                 /* Фиксираме височината колкото на картинката */
  gap: 2px;                     /* Малко разстояние между редовете */
}

/* Редът, съдържащ "Берберин" и зъбното колело */
.prog-cap-row {
  display: flex;
  align-items: center;
  gap: 4px;
  line-height: 1;
}

/* Основно име (напр. Берберин) - стандартно състояние */
.prog-cap-main {
  font-weight: 700;
  font-size: 13px;          
  color: var(--text);
  font-family: inherit;
  transition: all .2s ease;
}

/* Основно име - КОГАТО ИМА ИЗБРАНА МАРКА (Configured) */
/* Става малък етикет над марката - БЕЗ главни букви, по-тънък шрифт */
.prog-cap-main.configured {
  font-size: 11px;           
  color: var(--muted);       
  font-weight: 400;          /* Нормален шрифт, не удебелен */
  text-transform: none;      /* Изрично без главни букви */
  margin-bottom: 0;
}

/* Име на Марката (появява се отдолу) */
.prog-cap-brand {
  display: block;
  font-size: 13px;          /* Като в Основен Пакет */
  font-weight: 700;         /* Удебелено */
  color: var(--text);       
  line-height: 1.2;
  text-transform: none;     /* Без автоматични главни букви */
  
  /* Защита при много дълги имена на марки */
  white-space: normal;      
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;            /* Compatibility fix */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Скриваме празната марка */
.prog-cap-brand:empty {
  display: none;
}

/* Малко зъбно колело */
.prog-cap-settings {
  margin-left: 2px;
  padding: 0;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 1px solid #334155;
  background: #020617;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex-shrink: 0;
  opacity: 0.7;
}
.prog-cap-settings:hover {
  opacity: 1;
}

.prog-cap-settings svg {
  width: 11px;
  height: 11px;
}

/* --- Панел за Настройки --- */
.prog-config {
  flex-direction: column;
  gap: 14px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--border);
}

.prog-config .field {
  margin-bottom: 0;
}
.prog-config .field.brand-selector {
  margin-bottom: 8px;
}
.prog-config .field.custom-brand-field {
  margin-bottom: 8px;
}

.prog-config .field .lbl {
  margin-bottom: 4px;
}

.prog-config select:focus,
.prog-config input[type="text"]:focus {
  outline: none;
  box-shadow: none;
  border-color: #2b6e66;
}

/* Контейнер за кръглите бутони в конфигуратора */
.config-actions {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin-top: 26px;
  margin-bottom: 26px;
}
.config-buttons {
  display: flex;
  gap: 8px;
}
.config-actions .clk-btn {
  width: 34px;
  height: 34px;
}
.config-actions .clk-btn .clk-btn-icon svg {
  width: 20px;
  height: 20px;
}

/* Стойност до плъзгача */
.slider-val {
  color: var(--accent);
  font-weight: 800;
  font-size: 1.1em;
  padding: 0 4px;
}

/* Обвивка за плъзгача – 50% ширина, подравнен вляво */
.slider-track-wrapper {
  position: relative;
  margin-top: 8px;
  height: 10px;
  width: 50%;
  margin-left: 0;
  margin-right: 0;
}

.slider-track-fill {
  position: absolute;
  left: 0;
  top: 0;
  height: 10px;
  background: var(--accent);
  border-radius: 5px;
  pointer-events: none;
  z-index: 1;
}

.slider-control {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 10px;
  border-radius: 5px;
  border: 1px solid #254046;
  outline: none;
  padding: 0;
  position: relative;
  z-index: 2;
  background: transparent;
}

.slider-control::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  background: var(--accent);
  border-radius: 50%;
  cursor: pointer;
  border: 3px solid #06241b;
}

.slider-control::-moz-range-thumb {
  width: 24px;
  height: 24px;
  background: var(--accent);
  border-radius: 50%;
  cursor: pointer;
  border: 3px solid #06241b;
}

@media (max-width: 380px){
  .time-row select { min-width:48px; }
  .prod-img { width:64px; height:64px; border-radius:10px; }
  /* При много малки екрани, намаляваме височината на стека, за да съвпадне с по-малката картинка */
  .prog-cap-stack { height: 64px; }
}